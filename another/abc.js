var Clipper = null;
var FirstPoly = null, SecondPoly = null,ResultPoly=null;
var Paper = null;
FirstPoly = "M385.77,166.95L386.68,182.21L386.15,187.13L384.96,190.99L382.95,194.32L379.91,197.42L375.8,200.17L370.59,202.47L364.37,204.13L357.67,204.95L350.93,204.85L344.71,203.87L339.59,202.19L335.52,199.95L332.61,197.37L330.67,194.53L329.62,191.41L329.4,187.83L330.02,183.99L331.34,181.14L333.27,179.05L336.11,177.4L340.71,176.05L352.22,173.98L356.3,172.51L361.25,169.4L370.03,163.12L373.94,161.22L377.01,160.6L379.53,160.94L381.9,162.19L384.3,164.67L385.77,166.93L385.77,166.95ZM270.77,163.84L273.88,163.4L276.36,163.91L280.12,166.08L285.42,169.2L291.02,171.33L299.79,173.33L307.68,175.13L311.52,176.78L314.01,178.71L315.73,181.15L316.83,184.41L317.2,188.89L316.7,192.44L315.33,195.6L313.05,198.56L309.77,201.19L305.39,203.45L299.95,205.12L293.7,205.99L287.12,205.96L280.75,205L275.02,203.24L270.05,200.77L266.08,197.81L263.1,194.47L260.95,190.7L259.68,186.54L259.29,181.92L259.86,176.86L261.36,171.68L263.13,168.56L265.48,166.25L268.64,164.55L270.77,163.84L270.77,163.84ZM303.94,227.57L303.74,222.63L304.44,218.35L305.94,214.59L308.24,211.27L311.35,208.46L315.13,206.32L319.55,204.91L324.31,204.37L329.09,204.77L333.4,206.03L337.08,208.03L339.99,210.61L342.11,213.69L343.43,217.19L343.94,221.2L343.59,225.38L342.53,228.01L340.69,230.17L337.79,232.02L333.81,233.34L328.46,234.03L322.02,233.83L315.23,232.68L309.37,230.81L305.39,228.73L303.99,227.61L303.94,227.57ZM421.16,64.34L421.16,64.45L422.7,96.81L424.28,149.29L425.26,216.18L425.57,327.02L220.65,327.02L220.41,312.05L219.69,230.46L219.9,144.66L221.01,65.92L233.74,65.34L264.63,64.78L325.38,65.31L363.93,65.31L393.46,64.48L420.05,62.8L420.8,62.92L421.16,64.34ZM404.57,215.13L404.58,215.08L405.83,205.87L406.55,194.49L406.3,183.7L405.16,173.57L403.17,164.03L400.34,155.01L396.73,146.61L392.34,138.76L387.23,131.54L381.47,125.02L375.05,119.16L368.04,114.01L360.39,109.58L352.3,105.99L343.88,103.28L335.22,101.47L326.42,100.59L317.57,100.64L308.77,101.63L300.3,103.53L292.06,106.33L284.32,109.94L277.01,114.36L270.11,119.65L263.83,125.67L258.83,131.66L253.44,139.77L248.35,149.13L244.11,158.88L241,168.28L239,177.21L238.09,185.4L238.17,192.9L239.13,199.57L240.91,205.61L243.45,211.04L246.09,214.67L249.63,217.9L254.56,221.04L270.07,228.23L275.76,231.57L279.77,234.93L282.82,238.64L285.08,242.87L286.61,247.72L287.31,253.67L287.19,274.82L287.8,281.39L288.94,285.57L290.57,288.43L292.56,290.24L295.1,291.3L295.83,283.75L296,265.6L296.31,250.76L297.29,241.67L299.29,240.75L303.08,239.94L307.26,240L307.66,242.7L309.02,256.43L310.57,291.19L311.49,291.54L314.95,293.31L316.6,294.82L316.6,295.52L315.35,295.94L315.99,296.02L317.2,295.47L318.2,293.99L319.04,290.81L319.39,284.37L318.41,262.35L318.37,251.85L319.08,245.75L320.27,242.05L321.29,240.77L323.08,240.08L328.27,240L329.31,244.13L330.19,252.03L330.63,273.92L331.25,284.25L332.33,289.99L333.7,293.31L335.26,295.12L337.01,295.94L337.81,294.94L339.33,291.52L340.32,286.68L340.61,279.64L339.38,260.18L339.31,251.49L340.05,245.84L341.39,241.87L342.36,240.75L344.31,240.04L351.49,240L351.67,240.9L352.45,248.35L352.58,274.14L353.27,282.2L354.5,287.31L356.13,290.68L358.13,292.86L359.27,289.89L360.62,284.2L361.32,276.58L361.16,258.89L361.45,247.8L365.47,242.21L370.89,236.4L377.72,230.54L385.94,224.78L395.31,219.41L404.57,215.13Z";
SecondPoly = "M-29.42,106.23L-26.7,105.45L-11.55,101.73L0.12,99.72L9.69,98.94L17.63,99.17L24.29,100.23L23.93,92.91L24.08,81.36L25.12,70.62L26.99,60.59L29.66,51.22L33.11,42.43L37.31,34.29L42.16,26.9L47.77,20.05L53.98,13.98L60.82,8.61L68.2,4.01L76.04,0.24L84.37,-2.73L92.97,-4.8L101.89,-5.98L110.88,-6.23L120,-5.53L128.99,-3.88L137.63,-1.36L145.94,2.06L153.87,6.32L161.29,11.4L168.03,17.14L174.22,23.66L179.7,30.8L184.49,38.59L188.54,46.95L191.9,56.1L194.44,65.81L196.16,76.18L197,87.09L196.94,98.79L195.88,111.18L207.51,112.86L220.6,115.46L233.18,118.91L245.2,123.18L256.72,128.26L267.97,134.26L278.87,141.16L289.73,149.16L300.72,158.47L312.07,169.38L312.06,169.37L336.14,177.32L355.16,183.81L367.78,189L378.1,194.19L387.04,199.69L395.07,205.73L400.6,210.78L405.18,216.34L409.93,223.8L420.35,243.91L425.91,253.51L431.07,260.69L436.35,266.43L436.34,266.42L443.69,272.81L469.07,291.49L477.42,298.56L483.68,305.01L487.79,310.56L497.28,326.73L502.53,334.76L511.53,345.81L337.97,345.86L315.38,321.1L303.25,308.83L303.26,308.85L292.72,299.47L292.69,299.5L290.88,300.26L290.89,300.25L283.26,304.12L283.27,304.11L275.98,308.87L268.76,314.74L261.42,322.02L261.43,322.01L253.55,331.26L242.73,345.84L-29.42,345.86ZM127.69,269.76L127.68,269.77L133.88,268.63L133.87,268.64L139.54,266.64L139.53,266.66L144.66,263.86L144.65,263.87L149.4,260.18L149.38,260.19L153.81,255.5L158.06,249.51L162.29,241.74L166.81,231.1L166.8,231.11L176.87,202.06L182.04,188.77L182.04,188.78L182.02,188.77L181.74,188.64L181.75,188.65L179.85,188.27L178.29,188.8L178.3,188.79L176.74,190.4L176.75,190.39L173.98,196.05L173.14,196.87L172.34,196.57L171.01,194.4L174.86,188.74L180.8,179.01L185.49,169.61L185.48,169.62L188.88,160.79L188.87,160.8L191.15,152.4L191.14,152.41L192.39,144.4L192.38,144.41L192.65,136.76L192.65,136.77L191.95,129.43L191.96,129.44L190.36,122.45L189.2,126.33L186.64,132.72L183.5,138.19L179.85,142.75L175.82,146.34L171.49,149.01L166.88,150.79L162.01,151.66L157.07,151.61L152.08,150.61L147.07,148.62L142.21,145.63L137.56,141.62L133.27,136.62L129.46,130.68L129.03,130.72L129.04,130.71L124.06,131.87L124.07,131.86L119.96,133.69L116.46,136.26L116.47,136.25L113.27,139.82L107.23,149.32L104.14,153.18L101,155.72L97.49,157.4L93.11,158.38L88.02,158.61L83.43,157.91L79.22,156.35L75,153.77L70.26,149.63L60.57,138.77L54.38,132.43L54.39,132.44L49.11,128.26L43.79,125.19L43.54,126.2L43.55,126.19L43.13,133.69L43.13,133.68L43.66,140.71L43.65,140.69L45.09,147.46L45.08,147.44L47.49,154.24L47.48,154.22L51.23,161.76L63.98,182.09L67.55,189.18L69.73,195.4L70.92,201.58L71.16,207.87L70.43,214.58L68.63,221.85L68.56,221.68L68.68,203.83L68.68,203.84L68.16,197.1L68.17,197.11L67.05,192.75L67.06,192.76L65.5,189.85L65.51,189.86L63.49,187.86L60.94,186.59L60.95,186.6L57.55,186.01L57.78,189.41L57.77,189.4L59.32,201.46L59.31,201.45L61.68,212.76L61.67,212.75L64.76,223.11L64.75,223.1L68.47,232.45L72.73,240.71L77.44,247.84L82.45,253.81L82.44,253.8L87.82,258.8L93.45,262.8L93.44,262.79L99.44,265.89L99.43,265.88L105.67,268.07L105.66,268.06L112.58,269.42L112.57,269.41L120.65,270.08ZM121.49,240.71L118.05,239.68L115.54,238.06L113.86,235.97L112.96,233.43L112.86,230.29L112.9,230.33L114.24,231.32L114.23,231.31L117.3,232.52L117.29,232.51L122.05,233.17L132.1,233.03L140.49,233.06L139.8,234.49L137.79,236.7L134.63,238.72L130.41,240.25L125.83,240.94ZM90.76,219.11L91.11,218.28L92.59,216.41L95.22,214.69L99.6,213.14L106.53,211.9L117,211.2L143.09,211.3L151.49,210.93L151.31,211.49L149.72,213.46L147.43,214.88L143.97,215.82L138.58,216.09L117.5,214.37L117.51,214.38L108.81,214.35L101.81,215.22L101.82,215.21L95.89,216.85L95.9,216.84L90.72,219.22ZM131.9,198.38L131.72,195.25L132.38,192.96L133.78,191.21L136.84,189.34L140.91,187.09L142.52,185.35L143.3,183.24L143.3,183.25L143.22,183.13L141.54,180.12L139.65,174.9L138.32,168.14L137.62,158.87L137.76,144.77L142.77,159.79L145.49,170.4L146.69,178.4L146.78,184.55L146.02,189.28L144.58,192.89L142.54,195.66L139.94,197.69L136.5,199.14L132.22,199.86ZM108.17,188.43L106.35,187.41L105.13,185.72L104.56,183.25L104.61,183.31L104.81,183.53L104.8,183.52L106.39,184.64L106.38,184.63L108.44,184.92L114,183.64L116.83,183.49L119.09,184.26L121.14,185.99L120.5,186.31L114.98,188.22L110.98,188.8ZM163.89,141.31L166.4,137.22L174.87,127.72L177.63,123.62L179.28,119.59L179.28,119.6L179.24,119.6L179.25,119.59L176.7,119.79L176.71,119.78L170.65,120.87L170.66,120.86L164.55,122.95L164.56,122.94L148.93,130.62L148.93,130.61L149.21,132.61L149.19,132.6L150.57,136.41L152.55,139.41L152.54,139.4L155.11,141.71L155.1,141.69L158.43,143.41L158.41,143.4L162.62,144.5ZM90.87,144.21L90.86,144.22L93.93,139.6L97.47,134.4L99.02,130.65L99.02,130.66L98.92,130.62L98.93,130.63L63.23,119.65L67.31,125.14L73.8,132.62L73.79,132.61L79.3,137.68L84.84,141.56L84.83,141.55L90.59,144.44ZM128.47,127.41L128.46,127.42L134.55,125.73L134.54,125.74L141.57,122.7L141.56,122.71L154.9,115.21L164.19,110.32L171.16,107.57L177.57,106L183.83,105.4L190.12,105.74L182.19,101.42L182.2,101.43L175.96,98.85L175.97,98.86L170.13,97.45L170.14,97.46L164,96.98L157.13,97.46L157.08,97.55L156.47,98.59L153.09,103.35L149.58,106.83L145.83,109.3L141.79,110.89L137.21,111.67L131.97,111.55L125.78,110.38L117.8,107.78L92.32,96.78L92.33,96.79L83.94,93.95L83.95,93.96L77.47,92.65L77.48,92.66L72.09,92.45L67.48,93.16L67.5,93.15L63.28,94.72L63.29,94.71L59.49,97.13L55.9,100.53L55.91,100.52L52.52,105.09L49.25,111.18L52.77,110.06L58.91,108.7L64.9,108.31L70.86,108.86L77.27,110.42L84.53,113.27L105.04,123.87L105.03,123.86L111.74,126.51L111.73,126.5L117.29,127.77L117.28,127.76L122.82,128.06Z";
var LoopPoly = [];
LoopPoly[0]="M128.53,71.2644L194.973,71.2644L194.973,134.691L172.672,134.691L172.672,328.019L150.814,328.019L150.814,134.691L128.53,134.691Z";
LoopPoly[1]="M248.671,252.696L209.3059,252.696C209.65196400000002,264.174,210.50827,272.6626,211.85827,278.2811C213.75276,286.35159999999996,216.24017,290.3567,219.28743,290.3567C221.21381,290.3567,223.0587,288.62284,224.78902,285.09605C225.85909999999998,282.88383999999996,226.99533,278.998,228.21423,273.37945L247.56783,279.83538000000004C244.60324999999997,298.54648000000003,241.04575999999997,311.93668,236.86233,320.06738000000007C232.67766999999998,328.13788000000005,226.68232999999998,332.20328000000006,218.85872999999998,332.20328000000006C212.07327999999998,332.20328000000006,206.73702999999998,328.73555000000005,202.83352999999997,321.8012800000001C198.94650999999996,314.86701000000005,195.71736999999996,303.8070800000001,193.16499999999996,288.6830800000001C190.61144999999996,273.5589800000001,189.32640999999995,255.80458000000007,189.32640999999995,235.35968000000008C189.32640999999995,206.3068800000001,191.89649999999995,182.7531800000001,197.01894999999996,164.81928000000008C202.15793999999997,146.82508000000007,209.23984999999996,137.7990800000001,218.28244999999995,137.7990800000001C225.61238999999995,137.7990800000001,231.40924999999996,141.86327000000009,235.64234999999996,149.9337800000001C239.89196999999996,157.9452200000001,243.13646999999997,169.6617800000001,245.34395999999995,184.9051800000001C247.56797999999995,200.20878000000008,248.67113999999995,220.1151800000001,248.67113999999995,244.6254800000001L248.67113999999995,252.6959800000001L248.67113999999995,252.6959800000001ZM228.7079,218.562C228.313411,204.7525,227.29175,194.8879,225.64529,188.97060000000002C223.98111,182.99302000000003,221.80669999999998,180.00364000000002,219.10550999999998,180.00364000000002C215.97675999999998,180.00364000000002,213.48934999999997,184.54736000000003,211.61138999999997,193.51434C210.42673999999997,199.13286,209.66846999999999,207.44314,209.35547999999997,218.56204L228.70787999999996,218.56204L228.70787999999996,218.56204Z";
LoopPoly[2]="M248.247,561.938C123.31800000000001,489.013,97.61500000000001,393.07399999999996,119.13300000000001,335.392C135.27280000000002,292.0549,177.1147,269.6398,227.623,296.2395C216.5655,280.1009,228.22182099999998,257.3858,248.2463,257.3858C268.2708,257.3858,279.9259,280.1008,268.8684,296.2395C319.3784,269.63980000000004,361.2203,292.05484,377.0604,335.39200000000005C398.879,393.07370000000003,373.17574,489.01300000000003,248.24640000000002,561.9380000000001Z";
LoopPoly[3]="M244.87,142.045L268.176,142.045L276.329,193.873L285.783,142.045L307.458,142.045L289.984,230.638L308.71,328.019L285.783,328.019L276.329,268.119L265.178,328.019L243.898,328.019L262.527,230.638Z";
LoopPoly[4]="M103.25,315.876L261.125,315.876L261.125,387.751L419.001,243.99999999999997L261.125,100.24999999999997L261.125,172.12499999999997L103.25,172.12499999999997L103.25,315.876ZM182.18689999999998,315.876M261.12489999999997,351.8135M340.06289999999996,315.8748M340.06289999999996,172.1248M261.12489999999997,136.1873M182.18689999999998,172.1248M103.24999999999999,243.9998";
LoopPoly[5]="M128.53,71.2644L194.973,71.2644L194.973,134.691L172.672,134.691L172.672,328.019L150.814,328.019L150.814,134.691L128.53,134.691Z";
LoopPoly[6]="M333.074,71.2644L333.074,142.0434L343.8799,142.0434L343.8799,194.0522L333.074,194.0522L333.074,260.0489C333.074,268.00011,333.28896100000003,273.2608,333.701167,275.8308C334.342508,279.77688,335.463377,281.80956000000003,337.076767,281.80956000000003C338.527167,281.80956000000003,340.552767,280.25522,343.154737,277.20561000000004L344.60395700000004,326.46481000000006C339.74488700000006,330.29041000000007,335.21534700000007,332.20380000000006,330.99995700000005,332.20380000000006C326.10781700000007,332.20380000000006,322.50071700000007,329.93253000000004,320.19405700000004,325.38882000000007C317.87200700000005,320.84510000000006,316.15939700000007,313.91082000000006,315.05624700000004,304.64502000000005C313.935377,295.37924000000004,313.39206700000005,280.31542,313.39206700000005,259.51142000000004L313.39206700000005,194.05212000000006L306.14479700000004,194.05212000000006L306.14479700000004,142.04452000000006L313.39206700000005,142.04452000000006L313.39206700000005,107.85032000000007L333.07406700000007,71.26442000000006L333.07406700000007,71.26442000000006Z"
LoopPoly[7]="M394.761,244.116C394.761,234.24077000000003,398.09408,226.07340000000002,404.76024,219.67770000000002C411.44766,213.26193,420.44774,210.05287,431.80284,210.05287C444.78204,210.05287,454.59344,213.82414,461.21944,221.34427000000002C466.55213000000003,227.40689000000003,469.21907000000004,234.88687000000002,469.21907000000004,243.76167000000004C469.21907000000004,253.71958000000004,465.90607000000006,261.88697,459.30250000000007,268.26137000000006C452.69775000000004,274.61572000000007,443.55250000000007,277.8035300000001,431.86420000000004,277.8035300000001C421.44800000000004,277.8035300000001,413.03150000000005,275.15785000000005,406.59440000000006,269.86532000000005C398.69752000000005,263.32435000000004,394.76090000000005,254.74122000000006,394.76090000000005,244.11602000000005ZM419.6564,244.0534014C419.6564,249.84436140000003,420.82333,254.11520140000002,423.17728,256.8660014C425.51115,259.6368714,428.44856,261.0317614,431.98951,261.0317614C435.57299,261.0317614,438.5104,259.65695139999997,440.80292,256.9286014C443.11433999999997,254.1990614,444.2612,249.8443314,444.2612,243.8030014C444.2612,238.1986514,443.09427,234.0116314,440.78166,231.2620014C438.46905,228.5324614,435.59424,227.1576614,432.1773,227.1576614C428.55249,227.1576614,425.55248,228.5537314,423.19853,231.3234214C420.84459,234.1155514,419.65639,238.3651714,419.65639,244.0534214Z";
LoopPoly[8]="M89,83C88,83,88,84,87,84C87,84,86,85,86,85C85,86,85,87,84,87C84,88,84,88,84,88C84,89,84,89,84,90C85,90,85,90,85,90C85,90,86,90,86,90C86,89,87,89,87,88C87,88,88,87,88,86C88,85,89,84,89,83ZM88,80C88,80,87,80,87,81C87,81,87,81,86,81C86,81,86,81,86,81C85,81,84,81,84,81C83,81,82,81,81,81C80,80,80,80,79,79C78,78,78,77,78,76C77,76,77,74,77,73C77,72,77,70,78,68C78,66,79,64,80,62C80,62,80,62,79,63C79,63,79,63,79,64L77,67C76,68,75,70,74,72L74,61C74,61,74,60,74,60C74,60,74,59,74,59C73,59,73,60,73,60C73,61,73,62,72,64L72,65L72,66C71,67,71,68,71,69C71,69,71,70,70,71C70,71,70,72,70,73C70,73,69,74,69,74C66,79,63,81,58,81C56,81,54,81,52,80C50,79,49,78,47,76C46,75,45,73,44,71C43,69,43,67,43,65C43,63,43,61,44,59C45,57,46,56,47,54C48,53,50,52,51,51C53,50,55,50,57,50C58,48,59,47,61,47C62,46,64,46,66,46C68,46,70,46,72,47C73,48,74,49,75,49C75,50,76,51,76,52C77,53,77,55,77,56C77,58,78,59,78,61C79,59,80,58,81,57C82,55,83,54,84,53C85,53,86,52,87,51C89,51,90,50,92,50L92,52C91,52,90,53,90,53C89,53,89,53,88,54C88,54,87,55,87,55C87,56,86,56,86,57C86,58,85,59,85,61C84,62,84,64,83,65C83,67,82,69,82,70C82,72,82,74,82,75C82,76,82,77,82,78C83,78,83,79,84,79C84,79,83,79,83,79C83,78,83,78,83,77C83,77,83,77,83,76C83,76,83,75,84,75L87,62C88,62,89,62,89,62C90,62,90,62,90,62C91,62,91,62,92,62C91,64,91,66,90,68C90,69,89,70,89,71C89,72,89,73,88,74C88,74,88,75,88,75C88,76,88,76,88,76C88,76,88,76,88,77C88,77,88,77,88,77C89,76,90,75,90,73C91,72,92,70,92,68L94,64L94,63C94,63,94,63,94,63C94,63,94,62,94,62C94,62,95,62,95,62C95,62,96,62,96,62C97,62,97,62,97,62C98,62,98,62,99,62L95,76C95,76,96,75,96,74C97,73,97,72,98,71L98,70L100,70C100,72,99,73,98,74C98,75,97,76,97,77C97,77,96,78,96,79C95,79,94,80,94,80C93,82,92,84,92,86C91,88,90,89,90,90C89,91,88,92,88,92C87,93,86,93,86,93C85,93,84,93,84,93C83,93,83,92,82,92C82,92,82,91,81,91C81,90,81,90,81,89C81,88,81,88,81,87C81,86,82,86,82,85C82,84,83,83,84,83C85,82,86,81,88,80ZM70,61C70,62,70,62,70,62C70,62,70,62,70,62L70,61L70,61ZM70,56L72,56C72,56,72,56,72,55C73,55,73,55,73,55C72,52,71,51,70,50C68,49,67,48,65,48C64,48,63,48,62,48C62,49,61,49,60,50C61,50,62,50,63,50C64,51,65,51,66,52C67,53,67,54,68,54C69,55,69,56,70,57L70,56ZM66,63C66,63,66,62,67,62C67,62,67,61,68,61C68,59,67,58,67,57C66,56,66,55,65,54C64,53,63,53,62,52C60,52,59,52,58,52C57,53,57,55,57,56C57,57,57,58,57,59C57,60,58,61,58,61C59,62,60,62,60,63C61,63,62,63,63,63C64,63,65,63,65,63L66,63ZM58,79C59,79,60,79,61,78C62,78,63,77,63,76C64,75,65,74,66,73C67,71,67,70,68,68C67,70,66,71,64,72C63,73,61,73,59,73C58,73,57,73,56,73C55,72,54,72,53,71C52,70,51,69,51,68C51,67,50,66,50,65C50,64,51,63,51,61L53,62C53,63,53,64,53,65C53,65,53,66,53,67C53,68,54,69,54,69C55,70,56,70,56,70C57,71,58,71,59,71C60,71,61,71,61,70C62,70,63,70,64,69C65,69,65,68,66,67C66,66,67,65,67,64C66,65,64,66,63,66C62,66,61,65,60,65C59,64,58,64,57,63C56,62,55,61,55,60C55,59,54,58,54,56C54,56,54,55,55,54C55,54,55,53,55,52C54,53,52,53,51,54C50,55,49,56,48,57C47,59,47,60,46,61C46,63,45,64,45,66C45,67,46,69,46,71C47,72,48,74,49,75C50,76,51,77,53,78C54,79,56,79,58,79ZM101,112L101,114C100,115,99,117,99,118C98,119,98,120,97,121C97,121,96,122,96,122C95,122,95,123,94,123C93,123,93,122,93,122C92,122,92,122,91,121C91,121,91,120,91,120C90,119,90,119,90,119C90,119,89,120,89,120C87,122,85,123,83,123C83,123,82,122,81,122C81,122,80,121,80,121C79,120,79,120,79,119C78,119,78,118,78,118C78,119,77,119,76,120C75,122,73,123,71,123C70,123,69,122,69,122C68,122,68,121,67,121C67,120,66,120,66,119C66,118,66,117,66,117C66,116,66,115,66,115L66,115C66,115,65,115,65,115C65,115,65,115,65,115C64,116,64,117,63,118C63,119,62,120,61,120C61,121,60,122,60,122C59,122,58,123,58,123C57,123,56,122,55,122C55,121,54,120,54,119C53,121,51,122,49,122C49,122,48,122,47,121C47,121,46,120,46,119C46,118,46,117,47,116L50,104C50,104,51,104,51,104C51,104,52,104,52,104C53,104,54,104,55,104L51,120C51,119,52,118,53,116C54,114,55,111,56,107L57,104C57,104,58,104,58,104C58,104,59,104,59,104C60,104,61,104,62,104L58,118C58,118,58,119,58,119C58,119,58,119,58,119C58,120,58,120,58,120C58,120,58,120,58,120C59,120,59,120,59,120C60,119,60,119,60,118C61,118,61,117,62,116C62,116,63,115,63,114C63,113,63,113,62,113C62,112,62,112,62,112C62,111,62,111,62,111C62,110,62,110,62,110C62,109,62,108,62,108C62,107,62,106,63,106C63,105,63,105,64,104C64,104,65,104,65,104C66,104,67,105,67,106C67,107,67,108,66,109C66,110,66,111,66,113L66,113C66,113,66,112,67,112C67,112,67,111,67,111C67,110,68,109,68,108C69,107,70,107,70,106C71,105,71,105,72,104C73,104,73,104,74,104C75,104,75,104,76,104C76,104,77,105,77,105C77,106,78,106,78,107C78,107,78,108,78,109C78,111,77,113,76,114C75,116,73,117,70,117C70,118,70,118,70,119C70,120,70,120,71,120C72,120,72,120,73,120C74,120,74,119,75,118C76,118,76,117,77,116C78,115,78,114,79,113L79,112C79,112,79,111,80,111C80,110,80,109,81,108C82,107,82,107,83,106C83,105,84,105,85,104C85,104,86,104,87,104C87,104,88,104,88,104C89,104,89,105,89,105C90,106,90,106,90,107C90,107,90,108,90,109C90,111,90,113,88,114C87,116,85,117,83,117C83,118,83,118,83,119C83,120,83,120,84,120C84,120,85,120,85,120C86,120,87,119,87,118C88,118,89,117,89,116C90,115,91,114,91,113L92,112L93,107L91,107L92,105L94,105L96,98C96,98,96,98,96,98C97,98,97,98,98,98C98,98,99,98,100,98L98,105L100,105L100,107L98,107L95,118C94,119,94,119,94,120C94,120,94,120,94,120C95,120,95,120,95,120C95,119,96,119,96,118C96,118,97,117,97,116C98,115,98,113,99,112L101,112ZM87,106C87,106,86,106,86,107C86,108,85,108,85,109C85,110,84,111,84,112C84,113,83,114,83,115C84,115,85,114,85,114C86,113,87,112,87,110C87,109,88,108,88,107C88,106,87,106,87,106ZM75,106C74,106,74,106,74,107C73,108,73,108,73,109C72,110,72,111,72,112C71,113,71,114,71,115C72,115,72,114,73,114C74,113,74,112,74,110C75,109,75,108,75,107C75,106,75,106,75,106ZM42,107C42,107,42,107,42,107C42,107,42,107,42,107L42,107ZM47,102C48,101,48,101,48,101C49,100,49,100,49,99C50,99,50,98,50,98C50,98,51,97,51,97C51,96,51,96,51,96C51,95,51,95,51,94C51,94,51,93,50,93C50,93,50,93,49,94C49,94,49,95,48,96C48,96,48,97,47,98C47,99,47,100,47,101L47,102ZM39,105C39,105,40,105,40,105C40,105,40,105,41,105C41,105,41,104,41,104C41,104,41,103,41,103C41,102,40,101,40,100C39,99,39,98,38,97C37,96,36,96,35,95C33,95,32,94,31,94C31,95,30,96,30,96C30,97,30,97,30,98C30,99,30,100,31,100C31,101,32,102,33,103C33,104,34,104,35,104C37,105,38,105,39,105ZM31,121C32,121,34,120,35,120C36,119,37,118,38,117C39,116,40,115,41,113C41,112,42,110,42,108C41,110,40,112,38,113C37,115,35,115,32,115C31,115,30,115,29,115C28,114,27,114,26,113C25,112,24,111,24,110C23,109,23,108,23,107C23,106,23,106,23,105C24,105,24,104,24,103L26,104C26,105,25,106,25,107C25,108,26,109,26,109C26,110,27,111,27,111C28,112,28,112,29,112C30,113,31,113,32,113C33,113,35,112,36,111C38,110,39,109,40,107C40,107,39,107,39,107C39,107,39,107,39,107C37,107,36,107,35,107C33,106,32,105,31,104C30,104,29,103,29,101C28,100,28,99,28,97C28,97,28,97,28,96C28,96,28,95,28,95C27,95,25,96,24,97C23,98,22,99,21,100C20,101,19,102,19,104C19,105,18,106,18,108C18,110,19,111,19,113C20,114,21,116,22,117C23,118,24,119,26,120C27,120,29,121,31,121ZM47,106C47,108,47,111,46,112C46,114,45,116,44,118C41,121,37,123,32,123C30,123,28,123,27,122C25,122,24,121,22,120C21,119,20,118,19,116C18,115,17,113,16,112C16,111,16,110,16,109C16,109,16,108,16,107C16,106,16,104,17,102C17,100,18,99,19,98C21,96,22,95,24,94C25,93,27,93,29,92C31,91,32,89,33,89C35,88,36,87,38,87C40,87,41,88,43,89C44,89,46,90,47,92L46,94C45,93,44,92,44,92C43,91,42,91,42,91C41,90,41,90,40,90C39,90,39,90,38,90C37,90,36,90,35,90C34,91,33,91,32,92C33,92,35,93,36,93C37,94,38,94,39,95C40,96,41,97,42,98C42,99,43,100,43,102C43,100,44,99,44,98C44,96,45,95,46,94C46,93,47,93,48,92C49,91,50,91,50,91C52,91,52,91,53,92C53,93,54,94,54,95C54,97,53,98,52,100C51,102,49,103,47,105L47,106Z";
LoopPoly[9]="M147.711,519.815C39.05200000000001,456.38720000000006,16.696000000000026,372.94200000000006,35.411000000000016,322.77200000000005C49.448400000000014,285.07820000000004,85.84190000000001,265.5828,129.7743,288.71830000000006C120.15537,274.68090000000007,130.29398700000002,254.92450000000005,147.7106,254.92450000000005C165.1272,254.92450000000005,175.2658,274.68090000000007,165.6469,288.71830000000006C209.5793,265.5828000000001,245.97269999999997,285.07813000000004,259.7503,322.77200000000005C278.7271,372.94180000000006,256.36996999999997,456.38700000000006,147.71029999999996,519.815Z";
LoopPoly[10]="M314.966,469.153C173.793,386.74490000000003,144.747,278.331,169.06400000000002,213.149C187.30150000000003,164.1756,234.58470000000003,138.8468,291.663,168.9048C279.1669,150.66729999999998,292.338593,124.9995,314.9662,124.9995C337.595,124.9995,350.7667,150.6673,338.2706,168.9048C395.3487,138.8468,442.6306,164.17565,460.5306,213.149C485.1862,278.3307,456.14043,386.744,314.96659999999997,469.153Z";
var ResultLoop = [];
var color = "red";

var TestPoly = null;
var myPoints = null;
$(document).ready(function(){
	var scale = 100;
	
});


function isOnLine(x, y, endx, endy, px, py) {
    var f = function(somex) { return (endy - y) / (endx - x) * (somex - x) + y; };
    return Math.abs(f(px) - py) < 1e-6 // tolerance, rounding errors
        && px >= x && px <= endx;      // are they also on this segment?
}

function drawBezier() {	
	for(var i=0; i<numPixels; i++) {				
		percent = (1/numPixels) * i;
		var pos = getBezier(percent, S, E, c1, c2);
		objPixels[i].moveTo(pos.x, pos.y);
	}
}
function printDots(poly){
	console.log(poly);
	var x,y,dot;
	for(var i=0,il=poly.length;i<il;i++){
		for(var j=0,jl=poly[i].length;j<jl;j++){

			x = poly[i][j].X;
			y = poly[i][j].Y;	
					
				dot = Paper.circle(x,y,10);
				dot.attr("fill",color);		
		}
		if(color =="red")
		color="blue";
		else
			color ="red";
	}
}
function get_text_polys() {
	var text_polygon = '[[{"X":"28.18","Y":"205.95"},{"X":"28.18","Y":"105.07"},{"X":"48.27","Y":"105.07"},{"X":"48.28","Y":"110.23"},{"X":"54.15","Y":"107.22"},{"X":"59.69","Y":"105.39"},{"X":"65.04","Y":"104.66"},{"X":"72.07","Y":"105.08"},{"X":"78.09","Y":"106.31"},{"X":"81.57","Y":"107.68"},{"X":"84.84","Y":"110.05"},{"X":"88.03","Y":"113.63"},{"X":"90.87","Y":"118.22"},{"X":"92.71","Y":"123.12"},{"X":"94.06","Y":"129.73"},{"X":"94.70","Y":"138.25"},{"X":"94.41","Y":"147.24"},{"X":"93.31","Y":"155.42"},{"X":"91.66","Y":"161.49"},{"X":"89.46","Y":"166.25"},{"X":"86.67","Y":"170.32"},{"X":"83.75","Y":"173.13"},{"X":"80.65","Y":"174.92"},{"X":"75.51","Y":"176.56"},{"X":"69.28","Y":"177.50"},{"X":"63.74","Y":"177.55"},{"X":"57.05","Y":"176.72"},{"X":"51.42","Y":"175.15"},{"X":"48.27","Y":"173.79"},{"X":"48.27","Y":"205.95"},{"X":"48.27","Y":"205.95"},{"X":"28.18","Y":"205.95"}],[{"X":"48.28","Y":"120.42"},{"X":"48.38","Y":"164.32"},{"X":"52.31","Y":"166.53"},{"X":"56.14","Y":"167.74"},{"X":"61.35","Y":"168.35"},{"X":"65.96","Y":"167.83"},{"X":"69.49","Y":"166.59"},{"X":"72.20","Y":"164.73"},{"X":"74.29","Y":"162.19"},{"X":"76.19","Y":"157.95"},{"X":"77.71","Y":"152.00"},{"X":"78.63","Y":"144.11"},{"X":"78.66","Y":"136.61"},{"X":"77.89","Y":"129.16"},{"X":"76.59","Y":"124.08"},{"X":"74.84","Y":"120.60"},{"X":"72.55","Y":"118.04"},{"X":"69.77","Y":"116.28"},{"X":"65.91","Y":"115.07"},{"X":"60.69","Y":"114.57"},{"X":"56.85","Y":"115.18"},{"X":"53.10","Y":"116.68"},{"X":"48.91","Y":"119.57"},{"X":"48.28","Y":"120.39"},{"X":"48.28","Y":"120.42"}],[{"X":"132.15","Y":"104.65"},{"X":"139.94","Y":"105.10"},{"X":"146.11","Y":"106.30"},{"X":"151.03","Y":"108.11"},{"X":"155.15","Y":"110.57"},{"X":"158.60","Y":"113.67"},{"X":"161.35","Y":"117.41"},{"X":"163.45","Y":"121.89"},{"X":"165.10","Y":"127.80"},{"X":"166.07","Y":"135.09"},{"X":"166.22","Y":"143.93"},{"X":"165.51","Y":"151.69"},{"X":"164.06","Y":"158.12"},{"X":"162.01","Y":"163.28"},{"X":"159.40","Y":"167.47"},{"X":"156.32","Y":"170.74"},{"X":"152.52","Y":"173.40"},{"X":"147.87","Y":"175.49"},{"X":"142.07","Y":"176.99"},{"X":"134.92","Y":"177.77"},{"X":"127.42","Y":"177.67"},{"X":"120.74","Y":"176.71"},{"X":"115.29","Y":"175.07"},{"X":"110.74","Y":"172.78"},{"X":"106.95","Y":"169.86"},{"X":"103.92","Y":"166.34"},{"X":"101.48","Y":"162.04"},{"X":"99.57","Y":"156.68"},{"X":"98.29","Y":"150.05"},{"X":"97.78","Y":"141.98"},{"X":"98.18","Y":"134.19"},{"X":"99.36","Y":"127.55"},{"X":"101.22","Y":"122.01"},{"X":"103.68","Y":"117.38"},{"X":"106.77","Y":"113.52"},{"X":"110.41","Y":"110.41"},{"X":"114.84","Y":"107.89"},{"X":"120.07","Y":"106.06"},{"X":"126.27","Y":"104.95"},{"X":"132.11","Y":"104.65"},{"X":"132.15","Y":"104.65"}],[{"X":"117.86","Y":"140.93"},{"X":"118.75","Y":"153.65"},{"X":"119.63","Y":"158.05"},{"X":"121.31","Y":"161.73"},{"X":"123.57","Y":"164.71"},{"X":"126.01","Y":"166.43"},{"X":"129.14","Y":"167.44"},{"X":"133.32","Y":"167.70"},{"X":"137.17","Y":"167.11"},{"X":"140.03","Y":"165.83"},{"X":"142.14","Y":"163.92"},{"X":"143.62","Y":"161.33"},{"X":"145.05","Y":"155.97"},{"X":"145.97","Y":"148.23"},{"X":"146.12","Y":"137.89"},{"X":"145.44","Y":"129.22"},{"X":"144.13","Y":"122.91"},{"X":"142.80","Y":"119.58"},{"X":"140.91","Y":"117.26"},{"X":"138.39","Y":"115.66"},{"X":"135.07","Y":"114.75"},{"X":"131.03","Y":"114.64"},{"X":"127.21","Y":"115.38"},{"X":"124.25","Y":"116.82"},{"X":"122.07","Y":"118.86"},{"X":"120.53","Y":"121.59"},{"X":"119.03","Y":"126.93"},{"X":"118.09","Y":"134.21"},{"X":"117.86","Y":"140.81"},{"X":"117.86","Y":"140.93"}],[{"X":"172.03","Y":"177.00"},{"X":"172.03","Y":"76.33"},{"X":"191.91","Y":"76.33"},{"X":"191.91","Y":"177.00"},{"X":"191.91","Y":"177.00"},{"X":"172.03","Y":"177.00"}],[{"X":"224.60","Y":"196.88"},{"X":"221.39","Y":"198.11"},{"X":"215.61","Y":"199.00"},{"X":"208.60","Y":"199.21"},{"X":"204.09","Y":"190.40"},{"X":"211.28","Y":"190.55"},{"X":"214.82","Y":"189.98"},{"X":"217.84","Y":"188.66"},{"X":"220.35","Y":"186.54"},{"X":"222.45","Y":"183.44"},{"X":"224.33","Y":"178.55"},{"X":"225.80","Y":"173.86"},{"X":"195.43","Y":"105.07"},{"X":"215.95","Y":"105.07"},{"X":"235.40","Y":"149.04"},{"X":"252.44","Y":"105.07"},{"X":"265.17","Y":"105.14"},{"X":"233.73","Y":"186.25"},{"X":"231.07","Y":"190.77"},{"X":"228.03","Y":"194.27"},{"X":"224.70","Y":"196.82"},{"X":"224.60","Y":"196.88"}],[{"X":"292.60","Y":"192.98"},{"X":"298.73","Y":"192.56"},{"X":"303.08","Y":"191.46"},{"X":"305.98","Y":"189.91"},{"X":"307.86","Y":"187.98"},{"X":"308.96","Y":"185.54"},{"X":"309.26","Y":"183.06"},{"X":"309.20","Y":"173.81"},{"X":"304.04","Y":"175.83"},{"X":"298.03","Y":"177.13"},{"X":"291.00","Y":"177.63"},{"X":"284.29","Y":"177.05"},{"X":"278.60","Y":"175.70"},{"X":"274.88","Y":"174.11"},{"X":"271.82","Y":"171.71"},{"X":"268.90","Y":"168.11"},{"X":"266.25","Y":"163.24"},{"X":"264.52","Y":"157.97"},{"X":"263.31","Y":"150.88"},{"X":"262.81","Y":"141.60"},{"X":"263.34","Y":"132.62"},{"X":"264.61","Y":"125.23"},{"X":"266.40","Y":"119.67"},{"X":"268.74","Y":"115.31"},{"X":"271.95","Y":"111.17"},{"X":"275.11","Y":"108.42"},{"X":"278.30","Y":"106.76"},{"X":"283.81","Y":"105.35"},{"X":"290.52","Y":"104.67"},{"X":"295.16","Y":"104.90"},{"X":"299.98","Y":"105.99"},{"X":"306.08","Y":"108.50"},{"X":"309.26","Y":"110.23"},{"X":"309.26","Y":"105.06"},{"X":"329.35","Y":"105.06"},{"X":"329.23","Y":"182.37"},{"X":"328.37","Y":"186.78"},{"X":"326.76","Y":"190.49"},{"X":"324.35","Y":"193.73"},{"X":"321.15","Y":"196.44"},{"X":"316.95","Y":"198.74"},{"X":"311.55","Y":"200.55"},{"X":"304.61","Y":"201.78"},{"X":"296.23","Y":"202.25"},{"X":"286.50","Y":"201.75"},{"X":"279.10","Y":"200.55"},{"X":"271.33","Y":"198.26"},{"X":"269.50","Y":"197.28"},{"X":"268.04","Y":"186.11"},{"X":"273.14","Y":"188.62"},{"X":"280.19","Y":"191.16"},{"X":"286.81","Y":"192.48"},{"X":"292.48","Y":"192.97"},{"X":"292.60","Y":"192.98"}],[{"X":"309.26","Y":"120.42"},{"X":"308.13","Y":"119.26"},{"X":"303.52","Y":"116.46"},{"X":"299.14","Y":"114.93"},{"X":"296.63","Y":"114.57"},{"X":"291.87","Y":"115.12"},{"X":"288.19","Y":"116.39"},{"X":"285.33","Y":"118.31"},{"X":"282.99","Y":"121.03"},{"X":"281.19","Y":"124.65"},{"X":"279.81","Y":"130.01"},{"X":"278.92","Y":"137.91"},{"X":"278.88","Y":"145.11"},{"X":"279.69","Y":"152.40"},{"X":"281.18","Y":"158.05"},{"X":"283.08","Y":"162.12"},{"X":"285.18","Y":"164.65"},{"X":"287.89","Y":"166.53"},{"X":"291.41","Y":"167.79"},{"X":"296.02","Y":"168.34"},{"X":"301.23","Y":"167.79"},{"X":"305.10","Y":"166.63"},{"X":"309.03","Y":"164.44"},{"X":"309.26","Y":"164.24"},{"X":"309.26","Y":"164.24"},{"X":"309.26","Y":"120.42"}],[{"X":"369.84","Y":"104.65"},{"X":"377.62","Y":"105.10"},{"X":"383.80","Y":"106.30"},{"X":"388.72","Y":"108.11"},{"X":"392.84","Y":"110.56"},{"X":"396.29","Y":"113.67"},{"X":"399.04","Y":"117.41"},{"X":"401.13","Y":"121.89"},{"X":"402.78","Y":"127.80"},{"X":"403.75","Y":"135.08"},{"X":"403.90","Y":"143.93"},{"X":"403.19","Y":"151.69"},{"X":"401.74","Y":"158.12"},{"X":"399.70","Y":"163.28"},{"X":"397.08","Y":"167.47"},{"X":"394.00","Y":"170.74"},{"X":"390.20","Y":"173.40"},{"X":"385.55","Y":"175.49"},{"X":"379.75","Y":"176.99"},{"X":"372.60","Y":"177.77"},{"X":"365.11","Y":"177.67"},{"X":"358.43","Y":"176.71"},{"X":"352.98","Y":"175.07"},{"X":"348.43","Y":"172.78"},{"X":"344.63","Y":"169.86"},{"X":"341.60","Y":"166.34"},{"X":"339.16","Y":"162.04"},{"X":"337.26","Y":"156.68"},{"X":"335.98","Y":"150.05"},{"X":"335.46","Y":"141.97"},{"X":"335.86","Y":"134.19"},{"X":"337.04","Y":"127.55"},{"X":"338.90","Y":"122.01"},{"X":"341.37","Y":"117.38"},{"X":"344.45","Y":"113.52"},{"X":"348.10","Y":"110.41"},{"X":"352.52","Y":"107.89"},{"X":"357.76","Y":"106.06"},{"X":"363.95","Y":"104.95"},{"X":"369.79","Y":"104.65"},{"X":"369.84","Y":"104.65"}],[{"X":"355.55","Y":"140.93"},{"X":"356.44","Y":"153.65"},{"X":"357.32","Y":"158.05"},{"X":"358.99","Y":"161.73"},{"X":"361.25","Y":"164.71"},{"X":"363.70","Y":"166.43"},{"X":"366.83","Y":"167.44"},{"X":"371.01","Y":"167.70"},{"X":"374.86","Y":"167.11"},{"X":"377.72","Y":"165.83"},{"X":"379.82","Y":"163.92"},{"X":"381.31","Y":"161.33"},{"X":"382.74","Y":"155.97"},{"X":"383.65","Y":"148.23"},{"X":"383.81","Y":"137.89"},{"X":"383.12","Y":"129.22"},{"X":"381.82","Y":"122.91"},{"X":"380.48","Y":"119.58"},{"X":"378.60","Y":"117.26"},{"X":"376.07","Y":"115.66"},{"X":"372.76","Y":"114.75"},{"X":"368.72","Y":"114.64"},{"X":"364.90","Y":"115.38"},{"X":"361.94","Y":"116.82"},{"X":"359.76","Y":"118.86"},{"X":"358.22","Y":"121.60"},{"X":"356.71","Y":"126.93"},{"X":"355.77","Y":"134.21"},{"X":"355.55","Y":"140.81"},{"X":"355.55","Y":"140.93"}],[{"X":"471.82","Y":"121.68"},{"X":"471.82","Y":"177.00"},{"X":"456.69","Y":"177.00"},{"X":"456.58","Y":"122.81"},{"X":"455.77","Y":"120.25"},{"X":"454.20","Y":"118.25"},{"X":"451.80","Y":"116.74"},{"X":"448.06","Y":"115.65"},{"X":"442.84","Y":"115.25"},{"X":"438.30","Y":"116.22"},{"X":"435.19","Y":"117.70"},{"X":"432.97","Y":"119.70"},{"X":"430.36","Y":"123.35"},{"X":"429.69","Y":"124.95"},{"X":"429.69","Y":"177.00"},{"X":"409.38","Y":"177.00"},{"X":"409.38","Y":"105.07"},{"X":"429.69","Y":"105.07"},{"X":"429.70","Y":"110.91"},{"X":"434.67","Y":"107.84"},{"X":"440.16","Y":"105.83"},{"X":"445.62","Y":"104.85"},{"X":"452.21","Y":"104.70"},{"X":"457.71","Y":"105.40"},{"X":"461.98","Y":"106.78"},{"X":"465.33","Y":"108.76"},{"X":"468.28","Y":"111.73"},{"X":"470.35","Y":"115.03"},{"X":"471.52","Y":"118.58"},{"X":"471.82","Y":"121.56"},{"X":"471.82","Y":"121.68"}]]';
	var text_clipping = '[[{"X":"115.54","Y":"216.41"},{"X":"113.01","Y":"217.26"},{"X":"105.79","Y":"218.58"},{"X":"96.36","Y":"219.18"},{"X":"88.73","Y":"218.69"},{"X":"82.86","Y":"217.48"},{"X":"78.40","Y":"215.73"},{"X":"74.91","Y":"213.42"},{"X":"72.12","Y":"210.49"},{"X":"69.88","Y":"206.77"},{"X":"68.13","Y":"201.83"},{"X":"66.93","Y":"195.19"},{"X":"66.45","Y":"186.51"},{"X":"67.03","Y":"179.19"},{"X":"68.36","Y":"173.03"},{"X":"70.25","Y":"168.30"},{"X":"72.58","Y":"164.82"},{"X":"75.62","Y":"161.94"},{"X":"79.35","Y":"159.71"},{"X":"84.02","Y":"158.09"},{"X":"89.93","Y":"157.11"},{"X":"96.97","Y":"156.93"},{"X":"105.18","Y":"157.69"},{"X":"114.58","Y":"159.65"},{"X":"116.44","Y":"168.59"},{"X":"110.93","Y":"166.65"},{"X":"105.50","Y":"165.51"},{"X":"98.32","Y":"165.06"},{"X":"94.16","Y":"165.58"},{"X":"90.96","Y":"166.82"},{"X":"88.62","Y":"168.68"},{"X":"86.96","Y":"171.17"},{"X":"85.31","Y":"175.67"},{"X":"84.32","Y":"181.28"},{"X":"84.15","Y":"188.62"},{"X":"84.83","Y":"196.53"},{"X":"86.18","Y":"202.53"},{"X":"87.64","Y":"205.97"},{"X":"89.52","Y":"208.29"},{"X":"92.02","Y":"209.92"},{"X":"95.18","Y":"210.85"},{"X":"99.07","Y":"210.96"},{"X":"105.48","Y":"210.28"},{"X":"111.84","Y":"208.54"},{"X":"116.32","Y":"206.45"},{"X":"116.62","Y":"206.17"},{"X":"115.55","Y":"216.31"},{"X":"115.54","Y":"216.41"}],[{"X":"120.11","Y":"219.00"},{"X":"120.11","Y":"132.31"},{"X":"137.23","Y":"132.31"},{"X":"137.23","Y":"219.00"},{"X":"137.23","Y":"219.00"},{"X":"120.11","Y":"219.00"}],[{"X":"153.34","Y":"132.13"},{"X":"156.60","Y":"132.56"},{"X":"159.17","Y":"133.77"},{"X":"161.19","Y":"135.77"},{"X":"162.61","Y":"138.40"},{"X":"163.19","Y":"141.48"},{"X":"162.87","Y":"144.75"},{"X":"161.71","Y":"147.51"},{"X":"159.79","Y":"149.80"},{"X":"157.51","Y":"151.22"},{"X":"154.46","Y":"151.96"},{"X":"151.02","Y":"151.84"},{"X":"148.34","Y":"150.92"},{"X":"146.08","Y":"149.20"},{"X":"144.28","Y":"146.63"},{"X":"143.38","Y":"143.78"},{"X":"143.37","Y":"140.64"},{"X":"144.20","Y":"137.77"},{"X":"145.94","Y":"135.15"},{"X":"148.14","Y":"133.37"},{"X":"150.80","Y":"132.38"},{"X":"153.33","Y":"132.13"},{"X":"153.34","Y":"132.13"}],[{"X":"144.58","Y":"219.00"},{"X":"144.58","Y":"157.06"},{"X":"161.88","Y":"157.06"},{"X":"161.88","Y":"219.00"},{"X":"161.88","Y":"219.00"},{"X":"144.58","Y":"219.00"}],[{"X":"168.78","Y":"243.93"},{"X":"168.78","Y":"157.06"},{"X":"186.09","Y":"157.06"},{"X":"186.19","Y":"161.44"},{"X":"191.55","Y":"158.75"},{"X":"196.41","Y":"157.22"},{"X":"201.17","Y":"156.70"},{"X":"207.60","Y":"157.21"},{"X":"212.99","Y":"158.51"},{"X":"216.03","Y":"160.11"},{"X":"219.02","Y":"162.82"},{"X":"222.00","Y":"166.95"},{"X":"223.86","Y":"171.04"},{"X":"225.25","Y":"176.56"},{"X":"226.01","Y":"184.02"},{"X":"225.94","Y":"191.67"},{"X":"225.03","Y":"199.56"},{"X":"223.55","Y":"205.37"},{"X":"221.48","Y":"209.86"},{"X":"218.90","Y":"213.53"},{"X":"216.12","Y":"216.03"},{"X":"213.05","Y":"217.58"},{"X":"207.99","Y":"218.94"},{"X":"201.87","Y":"219.54"},{"X":"195.30","Y":"219.05"},{"X":"189.90","Y":"217.79"},{"X":"186.09","Y":"216.23"},{"X":"186.09","Y":"243.93"},{"X":"186.09","Y":"243.93"},{"X":"168.78","Y":"243.93"}],[{"X":"186.09","Y":"170.27"},{"X":"186.13","Y":"208.05"},{"X":"189.79","Y":"210.09"},{"X":"193.53","Y":"211.16"},{"X":"197.86","Y":"211.53"},{"X":"201.86","Y":"210.97"},{"X":"204.91","Y":"209.73"},{"X":"207.25","Y":"207.87"},{"X":"209.01","Y":"205.27"},{"X":"210.72","Y":"200.64"},{"X":"211.90","Y":"194.30"},{"X":"212.32","Y":"186.82"},{"X":"211.80","Y":"179.19"},{"X":"210.69","Y":"174.07"},{"X":"209.11","Y":"170.68"},{"X":"207.06","Y":"168.30"},{"X":"204.40","Y":"166.63"},{"X":"200.81","Y":"165.59"},{"X":"196.18","Y":"165.25"},{"X":"192.24","Y":"166.16"},{"X":"188.91","Y":"167.87"},{"X":"186.21","Y":"169.99"},{"X":"186.09","Y":"170.26"},{"X":"186.09","Y":"170.27"}],[{"X":"231.09","Y":"243.93"},{"X":"231.09","Y":"157.06"},{"X":"248.39","Y":"157.06"},{"X":"248.50","Y":"161.44"},{"X":"253.86","Y":"158.75"},{"X":"258.72","Y":"157.22"},{"X":"263.48","Y":"156.70"},{"X":"269.91","Y":"157.21"},{"X":"275.30","Y":"158.51"},{"X":"278.34","Y":"160.11"},{"X":"281.33","Y":"162.82"},{"X":"284.31","Y":"166.96"},{"X":"286.17","Y":"171.04"},{"X":"287.56","Y":"176.57"},{"X":"288.32","Y":"184.02"},{"X":"288.25","Y":"191.67"},{"X":"287.34","Y":"199.56"},{"X":"285.86","Y":"205.37"},{"X":"283.79","Y":"209.86"},{"X":"281.21","Y":"213.53"},{"X":"278.43","Y":"216.04"},{"X":"275.35","Y":"217.58"},{"X":"270.29","Y":"218.94"},{"X":"264.18","Y":"219.54"},{"X":"257.60","Y":"219.05"},{"X":"252.21","Y":"217.78"},{"X":"248.40","Y":"216.23"},{"X":"248.40","Y":"243.93"},{"X":"248.40","Y":"243.93"},{"X":"231.09","Y":"243.93"}],[{"X":"248.39","Y":"170.27"},{"X":"248.44","Y":"208.05"},{"X":"252.10","Y":"210.09"},{"X":"255.84","Y":"211.16"},{"X":"260.17","Y":"211.53"},{"X":"264.17","Y":"210.97"},{"X":"267.22","Y":"209.73"},{"X":"269.56","Y":"207.87"},{"X":"271.32","Y":"205.27"},{"X":"273.03","Y":"200.64"},{"X":"274.21","Y":"194.30"},{"X":"274.63","Y":"186.82"},{"X":"274.12","Y":"179.19"},{"X":"273.00","Y":"174.07"},{"X":"271.42","Y":"170.68"},{"X":"269.38","Y":"168.30"},{"X":"266.72","Y":"166.64"},{"X":"263.12","Y":"165.59"},{"X":"258.49","Y":"165.25"},{"X":"254.56","Y":"166.16"},{"X":"251.23","Y":"167.86"},{"X":"248.52","Y":"169.99"},{"X":"248.40","Y":"170.26"},{"X":"248.39","Y":"170.27"}],[{"X":"302.11","Y":"132.13"},{"X":"305.37","Y":"132.56"},{"X":"307.93","Y":"133.77"},{"X":"309.95","Y":"135.77"},{"X":"311.37","Y":"138.40"},{"X":"311.95","Y":"141.48"},{"X":"311.63","Y":"144.75"},{"X":"310.47","Y":"147.51"},{"X":"308.56","Y":"149.80"},{"X":"306.27","Y":"151.22"},{"X":"303.22","Y":"151.96"},{"X":"299.79","Y":"151.84"},{"X":"297.10","Y":"150.92"},{"X":"294.85","Y":"149.20"},{"X":"293.04","Y":"146.63"},{"X":"292.14","Y":"143.78"},{"X":"292.13","Y":"140.64"},{"X":"292.97","Y":"137.77"},{"X":"294.71","Y":"135.15"},{"X":"296.90","Y":"133.37"},{"X":"299.56","Y":"132.38"},{"X":"302.10","Y":"132.13"},{"X":"302.11","Y":"132.13"}],[{"X":"293.34","Y":"219.00"},{"X":"293.34","Y":"157.06"},{"X":"310.65","Y":"157.06"},{"X":"310.65","Y":"219.00"},{"X":"310.65","Y":"219.00"},{"X":"293.34","Y":"219.00"}],[{"X":"371.24","Y":"171.37"},{"X":"371.24","Y":"219.00"},{"X":"358.21","Y":"219.00"},{"X":"358.11","Y":"172.27"},{"X":"357.35","Y":"170.01"},{"X":"355.81","Y":"168.19"},{"X":"353.32","Y":"166.83"},{"X":"349.52","Y":"165.99"},{"X":"345.63","Y":"165.91"},{"X":"341.71","Y":"166.90"},{"X":"339.11","Y":"168.36"},{"X":"336.70","Y":"171.02"},{"X":"335.06","Y":"173.87"},{"X":"334.96","Y":"219.00"},{"X":"317.48","Y":"219.00"},{"X":"317.48","Y":"157.06"},{"X":"334.96","Y":"157.06"},{"X":"335.01","Y":"162.07"},{"X":"339.49","Y":"159.34"},{"X":"344.58","Y":"157.56"},{"X":"349.77","Y":"156.78"},{"X":"355.76","Y":"156.84"},{"X":"360.47","Y":"157.70"},{"X":"364.07","Y":"159.18"},{"X":"366.81","Y":"161.26"},{"X":"369.25","Y":"164.29"},{"X":"370.67","Y":"167.42"},{"X":"371.23","Y":"170.82"},{"X":"371.24","Y":"171.27"},{"X":"371.24","Y":"171.37"}],[{"X":"401.90","Y":"232.76"},{"X":"407.58","Y":"232.33"},{"X":"411.33","Y":"231.29"},{"X":"413.88","Y":"229.75"},{"X":"415.39","Y":"227.89"},{"X":"416.16","Y":"225.48"},{"X":"416.21","Y":"216.25"},{"X":"411.46","Y":"218.08"},{"X":"405.72","Y":"219.22"},{"X":"399.44","Y":"219.51"},{"X":"393.19","Y":"218.76"},{"X":"388.30","Y":"217.32"},{"X":"385.44","Y":"215.70"},{"X":"382.67","Y":"212.97"},{"X":"380.07","Y":"208.95"},{"X":"378.24","Y":"204.52"},{"X":"376.93","Y":"198.51"},{"X":"376.28","Y":"190.44"},{"X":"376.52","Y":"182.65"},{"X":"377.58","Y":"175.38"},{"X":"379.16","Y":"170.07"},{"X":"381.22","Y":"166.08"},{"X":"384.14","Y":"162.28"},{"X":"387.11","Y":"159.77"},{"X":"390.08","Y":"158.35"},{"X":"395.48","Y":"157.12"},{"X":"401.76","Y":"156.70"},{"X":"406.66","Y":"157.40"},{"X":"412.02","Y":"159.31"},{"X":"416.24","Y":"161.51"},{"X":"416.24","Y":"157.06"},{"X":"433.55","Y":"157.06"},{"X":"433.43","Y":"223.84"},{"X":"432.54","Y":"227.93"},{"X":"430.90","Y":"231.30"},{"X":"428.49","Y":"234.16"},{"X":"425.23","Y":"236.55"},{"X":"420.86","Y":"238.51"},{"X":"415.19","Y":"239.93"},{"X":"407.89","Y":"240.69"},{"X":"399.04","Y":"240.53"},{"X":"391.61","Y":"239.58"},{"X":"384.09","Y":"237.51"},{"X":"382.01","Y":"236.48"},{"X":"380.74","Y":"226.84"},{"X":"385.59","Y":"229.19"},{"X":"391.82","Y":"231.36"},{"X":"398.16","Y":"232.49"},{"X":"401.75","Y":"232.75"},{"X":"401.90","Y":"232.76"}],[{"X":"416.25","Y":"170.27"},{"X":"414.97","Y":"169.05"},{"X":"410.96","Y":"166.71"},{"X":"406.83","Y":"165.39"},{"X":"404.44","Y":"165.28"},{"X":"400.31","Y":"165.96"},{"X":"397.15","Y":"167.34"},{"X":"394.75","Y":"169.35"},{"X":"392.82","Y":"172.20"},{"X":"391.40","Y":"176.14"},{"X":"390.35","Y":"182.50"},{"X":"390.04","Y":"190.14"},{"X":"390.67","Y":"197.15"},{"X":"391.97","Y":"202.39"},{"X":"393.71","Y":"206.20"},{"X":"395.76","Y":"208.58"},{"X":"398.42","Y":"210.25"},{"X":"401.86","Y":"211.27"},{"X":"406.04","Y":"211.51"},{"X":"410.92","Y":"210.69"},{"X":"414.49","Y":"209.16"},{"X":"416.25","Y":"208.01"},{"X":"416.25","Y":"170.27"},{"X":"416.25","Y":"170.27"}]]';
		return {
		  "ss": deserialize_clipper_poly(text_polygon),
		  "cc": deserialize_clipper_poly(text_clipping)
		};
}

function deserialize_clipper_poly(e){window.lsk++;var t=JSON.parse(e);var n,r,i,s=[[]],o,u;var a=new ClipperLib.Polygons;for(n=0,o=t.length;n<o;n++){a[n]=new ClipperLib.Polygon;for(r=0,u=t[n].length;r<u;r++){i=new ClipperLib.IntPoint;if(!isNaN(Number(t[n][r].X))&&!isNaN(Number(t[n][r].Y))){i.X=Math.round(Number(t[n][r].X));i.Y=Math.round(Number(t[n][r].Y));a[n].push(i)}else return s}}return a}function polys2path(e,t){var n="",r,i;if(!t)t=1;for(r=0;r<e.length;r++){for(i=0;i<e[r].length;i++){if(!i)n+="M";else n+="L";n+=e[r][i].X/t+", "+e[r][i].Y/t}n+="Z"}return n}function svgpath_to_clipper_polygons(e){var t;e=e.trim();t=Raphael.parsePathString(e);t=Raphael._pathToAbsolute(t);var n=t.flatten().join(" ");var r=n.replace(/M/g,"|M").split("|");var i,s=[],o=[];for(i=0;i<r.length;i++){if(r[i].trim()==="")continue;t=Raphael.parsePathString(r[i].trim());o=[];var u=0,a,f=t.length,l="",c=0,h=0,p={},d={};d.x="";d.y="";for(;u<f;u++){l=t[u][0].toUpperCase();if(l!="M"&&l!="L"&&l!="Z")continue;if(l!="Z"){for(a=1;a<t[u].length;a=a+2){if(l=="V")h=t[u][a];else if(l=="H")c=t[u][a];else{c=t[u][a];h=t[u][a+1]}p={};p.X=null;p.Y=null;if(typeof c!="undefined"&&!isNaN(Number(c)))p.X=Number(c);if(typeof h!="undefined"&&!isNaN(Number(h)))p.Y=Number(h);if(p.X!==null&&p.Y!==null){o.push(p)}else{return false}}}if(l!="Z"&&d.x===""||l=="M"){d.x=c;d.y=h}if(l=="Z"){c=d.x;h=d.y}}s.push(o)}return s}function scaleup(e,t){var n,r;if(!t)t=1;for(n=0;n<e.length;n++){for(r=0;r<e[n].length;r++){e[n][r].X*=t;e[n][r].Y*=t}}return e}function normalize_clipper_poly(e,t){if(typeof e!="string")return false;e=e.trim();var n,r;if(e.substr(0,1).toUpperCase()==="M"){n=svgpath_to_clipper_polygons(e);if(n===false){r="Unable to parse SVG path string.\n";r+="Click OK to continue.\n";if(!t)alert(r);return false}else return JSON.stringify(n)}e=e.replace(/[\s,]+/g,",");if(e.substr(0,1)!=="[")e="["+e;if(e.substr(-1,1)!=="]")e=e+"]";try{var i=JSON.parse(e)}catch(s){r="Unable to parse polygon string.\n";r+="Error: "+s.message+"\n";r+="Click OK to continue.\n";if(!t)alert(r);return false}var o=[],u;if(isArray(i)&&i.length&&typeof i[0]=="number"){var a=i.length;for(u=0;u<a;u=u+2){o.push({X:i[u],Y:i[u+1]})}i=o}var f=[],u,l,a,c;if(isArray(i)&&i.length&&isArray(i[0])&&typeof i[0][0]!="undefined"&&typeof i[0][0].X=="undefined"&&typeof i[0][0].x=="undefined"){c=i.length;for(l=0;l<c;l++){o=[];a=i[l].length;for(u=0;u<a;u=u+2){o.push({X:i[l][u],Y:i[l][u+1]})}f.push(o)}i=f}if(isArray(i)&&i.length>0&&!isArray(i[0]))i=[i];var h,p=[[]],d,v,m,g;n=[[]];for(u=0,d=i.length;u<d;u++){n[u]=[];for(l=0,v=i[u].length;l<v;l++){h={};g=null;m=null;if(typeof i[u][l].X!="undefined"&&!isNaN(Number(i[u][l].X)))m=Number(i[u][l].X);else if(typeof i[u][l].x!="undefined"&&!isNaN(Number(i[u][l].x)))m=Number(i[u][l].x);if(typeof i[u][l].Y!="undefined"&&!isNaN(Number(i[u][l].Y)))g=Number(i[u][l].Y);else if(typeof i[u][l].y!="undefined"&&!isNaN(Number(i[u][l].y)))g=Number(i[u][l].y);if(g!==null&&m!==null){h.X=m;h.Y=g;n[u].push(h)}else{r="Unable to parse polygon string.\n";r+="Error: Coordinates are not in a right form.\n";r+="Click OK to continue.\n";if(!t)alert(r);return false}}}return JSON.stringify(n)}function pathToPoly(e){var t=e.getTotalLength();var n=e.getPointAtLength(0);var r=e.getPathSegAtLength(0);var i=n.x+","+n.y;var s=[];s[0]={X:n.x,Y:n.y};for(var o=1;o<t;o++){n=e.getPointAtLength(o);if(e.getPathSegAtLength(o)>r){i=i+" "+n.x+","+n.y;s[o]={X:n.x,Y:n.y};r=e.getPathSegAtLength(o)}}console.log(s)}function pathToPolygon(e,t){if(!t)t=0;var n=e.ownerDocument;var r=n.createElementNS("http://www.w3.org/2000/svg","polygon");for(var i=[],s=e.pathSegList,o=s.numberOfItems-1;o>=0;--o)i[o]=s.getItem(o);var u=i.concat();var a,f,l=[],c,h;var p=function(e){if(e.pathSegType==SVGPathSeg.PATHSEG_CLOSEPATH){}else{if(e.pathSegType%2==1&&e.pathSegType>1){c+=e.x;h+=e.y}else{c=e.x;h=e.y}var t=l[l.length-1];if(!t||c!=t[0]||h!=t[1])l.push([{X:g.x,Y:g.y}])}};for(var d=0,v=e.getTotalLength(),m=v/t;d<=v;d+=m){var a=u[e.getPathSegAtLength(d)];var g=e.getPointAtLength(d);if(a!=f){f=a;while(i.length&&i[0]!=a)p(i.shift())}var y=l[l.length-1]}for(var o=0,v=i.length;o<v;++o)p(i[o]);printDots(l)}function getBezier(e,t,n,r,i){if(!i&&!r)var i=new coord(t.X+3*(n.X-t.X)/4,t.Y+3*(n.Y-t.Y)/4);if(!i)var i=r;if(!r)var r=new coord(t.X+(n.X-t.X)/4,t.Y+(n.Y-t.Y)/4);var s=new coord;s.X=t.X*B1(e)+r.X*B2(e)+i.X*B3(e)+n.X*B4(e);s.Y=t.Y*B1(e)+r.Y*B2(e)+i.Y*B3(e)+n.Y*B4(e);return s}function myPathToPoly(e){myPoints=Raphael.parsePathString(e);var t=[];var n,r,i,s;var o,u,a=10;var f=0;for(var l=0,c=myPoints.length;l<c;l++){objPixels=[];if(myPoints[l][0]=="M"){t[t.length]=[];f=0;t[t.length-1][f++]={Y:myPoints[l][2],X:myPoints[l][1]};continue}if(myPoints[l][0]=="L"){t[t.length-1][f++]={Y:myPoints[l][2],X:myPoints[l][1]}}if(myPoints[l][0]=="C"){o=myPoints[l-1][myPoints[l-1].length-1];u=myPoints[l-1][myPoints[l-1].length-2];n=new coord(o,u);o=myPoints[l][myPoints[l].length-1];u=myPoints[l][myPoints[l].length-2];r=new coord(o,u);o=myPoints[l][1];u=myPoints[l][2];i=new coord(u,o);o=myPoints[l][3];u=myPoints[l][4];s=new coord(u,o);for(var h=0;h<a;h++){percent=1/a*h;var p=getBezier(percent,r,n,s,i);t[t.length-1][f++]={Y:p.X,X:p.Y}}}}return t}var scaled_paths=[];var scale=100,sub_poly_links_update=1;Array.prototype.flatten||(Array.prototype.flatten=function(){return this.reduce(function(e,t){return e.concat("function"===typeof t.flatten?t.flatten():t)},[])});B1=function(e){return e*e*e};B2=function(e){return 3*e*e*(1-e)};B3=function(e){return 3*e*(1-e)*(1-e)};B4=function(e){return(1-e)*(1-e)*(1-e)};coord=function(e,t){if(!e)var e=0;if(!t)var t=0;return{X:e,Y:t}}

/*
function deserialize_clipper_poly(polystr) {
		window.lsk++;
		var poly = JSON.parse(polystr);
		var i, j, pp, n = [[]], m, pm;
		var np = new ClipperLib.Polygons();
		for (i = 0, m = poly.length; i < m; i++) {
		  np[i] = new ClipperLib.Polygon();
		  for (j = 0, pm = poly[i].length; j < pm; j++) {
		    pp = new ClipperLib.IntPoint();
		    if (!isNaN(Number(poly[i][j].X)) && !isNaN(Number(poly[i][j].Y))) {
		      pp.X = Math.round(Number(poly[i][j].X));
		      pp.Y = Math.round(Number(poly[i][j].Y));              
		      np[i].push(pp);
		    }
		    else return n;
		  }
		}
	return np;
}
var scaled_paths = [];
var scale = 100,sub_poly_links_update=1;
function polys2path (poly, scale) {
  var path = "", i, j;
  if (!scale) scale = 1;
  for(i = 0; i < poly.length; i++) {
    for(j = 0; j < poly[i].length; j++) {
      if (!j) path += "M";
      else path += "L";
      path += (poly[i][j].X / scale) + ", " + (poly[i][j].Y / scale);
    }
    path += "Z";
  }
  return path;
}


function svgpath_to_clipper_polygons(d) {
	var arr;
	d = d.trim();
	arr = Raphael.parsePathString(d); // str to array
	arr = Raphael._pathToAbsolute(arr); // mahvstcsqz -> uppercase
	var str = arr.flatten().join(" ");
	var paths = str.replace(/M/g, '|M').split("|");
	var k, polygons_arr = [],
	  polygon_arr = [];
	for (k = 0; k < paths.length; k++) {
	  if (paths[k].trim() === "") continue;
	  arr = Raphael.parsePathString(paths[k].trim());
	  polygon_arr = [];
	  var i = 0,
	    j, m = arr.length,
	    letter = "",
	    x = 0,
	    y = 0,
	    pt = {},
	    subpath_start = {};
	  subpath_start.x = "";
	  subpath_start.y = "";
	  for (; i < m; i++) {
	    letter = arr[i][0].toUpperCase();
	    if (letter != "M" && letter != "L" && letter != "Z") continue;
	    if (letter != "Z") {
	      for (j = 1; j < arr[i].length; j = j + 2) {
	        if (letter == "V") y = arr[i][j];
	        else if (letter == "H") x = arr[i][j];
	        else {
	          x = arr[i][j];
	          y = arr[i][j + 1];
	        }
	        pt = {};
	        pt.X = null;
	        pt.Y = null;
	        if (typeof (x) != "undefined" && !isNaN(Number(x))) pt.X = Number(x);
	        if (typeof (y) != "undefined" && !isNaN(Number(y))) pt.Y = Number(y);
	        if (pt.X !== null && pt.Y !== null) {
	          polygon_arr.push(pt);
	        }
	        else {
	          return false;
	        }
	      }
	    }
	    if ((letter != "Z" && subpath_start.x === "") || letter == "M") {
	      subpath_start.x = x;
	      subpath_start.y = y;
	    }
	    if (letter == "Z") {
	      x = subpath_start.x;
	      y = subpath_start.y;
	    }
	  }
	  polygons_arr.push(polygon_arr);
	}
	return polygons_arr;
	}
	Array.prototype.flatten || (Array.prototype.flatten = function () {
	return this.reduce(function (a, b) {
	  return a.concat('function' === typeof b.flatten ? b.flatten() : b);
	}, []);
});

function scaleup(poly, scale) {
  var i, j;
  if (!scale) scale = 1;
  for(i = 0; i < poly.length; i++) {
    for(j = 0; j < poly[i].length; j++) {
      poly[i][j].X *= scale;
      poly[i][j].Y *= scale;
    }
  }
  return poly;
}

function normalize_clipper_poly(polystr, quiet) {
	if (typeof (polystr) != "string") return false;
	polystr = polystr.trim();
	var np, txt;
	if (polystr.substr(0, 1).toUpperCase() === "M") {
	  np = svgpath_to_clipper_polygons(polystr);
	  if (np === false) {
	    txt = "Unable to parse SVG path string.\n";
	    txt += "Click OK to continue.\n";
	    if (!quiet) alert(txt);
	    return false;
	  }
	  else return JSON.stringify(np);
	}
	polystr = polystr.replace(/[\s,]+/g, ",");
	if (polystr.substr(0, 1) !== "[") polystr = "[" + polystr;
	if (polystr.substr(-1, 1) !== "]") polystr = polystr + "]";
	try {
	  var poly = JSON.parse(polystr);
	}
	catch (err) {
	  txt = "Unable to parse polygon string.\n";
	  txt += "Error: " + err.message + "\n";
	  txt += "Click OK to continue.\n";
	  if (!quiet) alert(txt);
	  return false;
	}
	// if only points without "X" and "Y"
	var temp_n = [], i;
	if (isArray(poly) && poly.length && typeof (poly[0]) == "number") {
	  var len = poly.length;
	  for (i = 0; i < len; i = i + 2) {
	    temp_n.push({
	      X: poly[i],
	      Y: poly[i + 1]
	    });
	  }
	  poly = temp_n;
	}
	// if an array of array of points without "X" and "Y"
	var temp_n2 = [], i, j, len, len2;
	if (isArray(poly) && poly.length && isArray(poly[0]) && typeof(poly[0][0]) != "undefined" &&
	typeof(poly[0][0].X) == "undefined" &&
	typeof(poly[0][0].x) == "undefined") {
	  len2 = poly.length;
	  for (j = 0; j < len2; j++) {
	    temp_n = [];
	    len = poly[j].length;
	    for (i = 0; i < len; i = i + 2) {
	      temp_n.push({
	        X: poly[j][i],
	        Y: poly[j][i + 1]
	      });
	    }
	    temp_n2.push(temp_n);
	  }
	  poly = temp_n2;
	}

	// if not array of arrays, convert to array of arrays
	if (isArray(poly) && poly.length > 0 && !isArray(poly[0])) poly = [poly];
	var pp, n = [[]],
	  m, pm, x, y;
	np = [[]];
	for (i = 0, m = poly.length; i < m; i++) {
	  np[i] = [];
	  for (j = 0, pm = poly[i].length; j < pm; j++) {
	    pp = {};
	    y = null;
	    x = null;
	    if (typeof (poly[i][j].X) != "undefined" && !isNaN(Number(poly[i][j].X))) x = Number(poly[i][j].X);
	    else if (typeof (poly[i][j].x) != "undefined" && !isNaN(Number(poly[i][j].x))) x = Number(poly[i][j].x);
	    if (typeof (poly[i][j].Y) != "undefined" && !isNaN(Number(poly[i][j].Y))) y = Number(poly[i][j].Y);
	    else if (typeof (poly[i][j].y) != "undefined" && !isNaN(Number(poly[i][j].y))) y = Number(poly[i][j].y);
	    if (y !== null && x !== null) {
	      pp.X = x;
	      pp.Y = y;
	      np[i].push(pp);
	    }
	    else {
	      txt = "Unable to parse polygon string.\n";
	      txt += "Error: Coordinates are not in a right form.\n";
	      txt += "Click OK to continue.\n";
	      if (!quiet) alert(txt);
	      return false;
	    };
	  }
	}
	return JSON.stringify(np);
}

function pathToPoly(path){
	var len = path.getTotalLength();
    var p=path.getPointAtLength(0);
    var seg = path.getPathSegAtLength(0);
    var stp=p.x+","+p.y;
    var myArray = [];
    myArray[0] = {X :p.x,Y:p.y};
    for(var i=1; i<len; i++){

        p=path.getPointAtLength(i);

        if (path.getPathSegAtLength(i)>seg) {

        stp=stp+" "+p.x+","+p.y;
        myArray[i] = {X :p.x,Y:p.y};
        seg = path.getPathSegAtLength(i);

        }

    }
    console.log(myArray);
}

function pathToPolygon(path,samples){
  if (!samples) samples = 0;
  var doc = path.ownerDocument;
  var poly = doc.createElementNS('http://www.w3.org/2000/svg','polygon');
 
  // Put all path segments in a queue
  for (var segs=[],s=path.pathSegList,i=s.numberOfItems-1;i>=0;--i) segs[i] = s.getItem(i);
  var segments = segs.concat();
 
  var seg,lastSeg,points=[],x,y;
  var addSegmentPoint = function(s){
    if (s.pathSegType == SVGPathSeg.PATHSEG_CLOSEPATH){
      
    }else{
      if (s.pathSegType%2==1 && s.pathSegType>1){
        // All odd-numbered path types are relative, except PATHSEG_CLOSEPATH (1)
        x+=s.x; y+=s.y;
      }else{
        x=s.x; y=s.y;
      }         
      var lastPoint = points[points.length-1];
      if (!lastPoint || x!=lastPoint[0] || y!=lastPoint[1]) points.push([{X:pt.x,Y:pt.y}]);
    }
  };
  for (var d=0,len=path.getTotalLength(),step=len/samples;d<=len;d+=step){
    var seg = segments[path.getPathSegAtLength(d)];
    var pt  = path.getPointAtLength(d);
    if (seg != lastSeg){
      lastSeg = seg;
      while (segs.length && segs[0]!=seg) addSegmentPoint( segs.shift() );
    }
    var lastPoint = points[points.length-1];
    //if (!lastPoint || pt.x!=lastPoint[0] || pt.y!=lastPoint[1]) points.push(pt);
  }
  for (var i=0,len=segs.length;i<len;++i) addSegmentPoint(segs[i]);
  
  	printDots(points);
 
}

//Bezier functions:
	B1 = function(t) { return (t*t*t); }
	B2 = function(t) { return (3*t*t*(1-t)); }
	B3 = function(t) { return (3*t*(1-t)*(1-t)); }
	B4 = function(t) { return ((1-t)*(1-t)*(1-t)); }
	
//coordinate constructor
coord = function (x,y) { if(!x) var x=0; if(!y) var y=0; return {X: x, Y: y}; }

//Finds the coordinates of a point at a certain stage through a bezier curve
function getBezier(percent,startPos,endPos,control1,control2) {
	//if there aren't any extra control points plot a straight line, if there is only 1
	//make 2nd point same as 1st

	if(!control2 && !control1) var control2 = new coord(startPos.X + 3*(endPos.X-startPos.X)/4, startPos.Y + 3*(endPos.Y-startPos.Y)/4);
	if(!control2) var control2 = control1;
	if(!control1) var control1 = new coord(startPos.X + (endPos.X-startPos.X)/4, startPos.Y + (endPos.Y-startPos.Y)/4);
			
	var pos = new coord();
	pos.X = startPos.X * B1(percent) + control1.X * B2(percent) + control2.X * B3(percent) + endPos.X * B4(percent);
	pos.Y = startPos.Y * B1(percent) + control1.Y * B2(percent) + control2.Y * B3(percent) + endPos.Y * B4(percent);

	return pos;
}

function myPathToPoly(path){
	
	myPoints = Raphael.parsePathString(path);
	var myArray = [];
	var startPoint,endPoint,controlFirst,controlSecond;
	var myX,myY,numPixels=10;
	var k = 0;
	for(var i=0,il=myPoints.length;i<il;i++){
		objPixels = [];	
		
		if(myPoints[i][0] == "M"){
			myArray[myArray.length] = [];			
			k=0;
			myArray[myArray.length-1][k++] = {Y: myPoints[i][2], X:myPoints[i][1]}
			continue;
		}
		if(myPoints[i][0] == "L"){
			
			myArray[myArray.length-1][k++] = {Y: myPoints[i][2], X:myPoints[i][1]}
		}
		if(myPoints[i][0] == "C"){
			myX = myPoints[i-1][myPoints[i-1].length-1];
			myY = myPoints[i-1][myPoints[i-1].length-2];
			startPoint = new coord(myX,myY);
			myX = myPoints[i][myPoints[i].length-1];
			myY = myPoints[i][myPoints[i].length-2];
			endPoint = new coord(myX,myY);			
			myX = myPoints[i][1];
			myY = myPoints[i][2];
			controlFirst = new coord(myY,myX);
			myX = myPoints[i][3];
			myY = myPoints[i][4];
			controlSecond = new coord(myY,myX);			
			for(var j=0; j<numPixels; j++) {				
				percent = (1/numPixels) * j;
				var pos = getBezier(percent,  endPoint, startPoint, controlSecond,  controlFirst);
							
				myArray[myArray.length-1][k++] = {Y: pos.X, X:pos.Y};				
			}					
		}
	}
	return myArray;
}

*/